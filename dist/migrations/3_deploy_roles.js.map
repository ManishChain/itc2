{"version":3,"file":"3_deploy_roles.js","sourceRoot":"","sources":["../../migrations/3_deploy_roles.ts"],"names":[],"mappings":"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","sourcesContent":["import { createMintAccounts, deployRoleRegistry, grantPermission, IMintUser } from '@settlemint/enteth-migration-utils';\nimport faker from 'faker';\n\nimport { AdminRoleRegistryContract, AdminRoleRegistryInstance } from '../types/truffle-contracts/AdminRoleRegistry';\nimport { AgentRoleRegistryContract } from '../types/truffle-contracts/AgentRoleRegistry';\nimport { BusinessUnitRoleRegistryContract } from '../types/truffle-contracts/BusinessUnitRoleRegistry';\nimport { BuyerRoleRegistryContract } from '../types/truffle-contracts/BuyerRoleRegistry';\nimport { CaptainRoleRegistryContract } from '../types/truffle-contracts/CaptainRoleRegistry';\nimport { CarrierRoleRegistryContract } from '../types/truffle-contracts/CarrierRoleRegistry';\nimport { CheckerRoleRegistryContract } from '../types/truffle-contracts/CheckerRoleRegistry';\nimport { FreightForwarderRoleRegistryContract } from '../types/truffle-contracts/FreightForwarderRoleRegistry';\nimport { GateKeeperContract, GateKeeperInstance } from '../types/truffle-contracts/GateKeeper';\nimport { LandRegistrarRoleRegistryContract } from '../types/truffle-contracts/LandRegistrarRoleRegistry';\nimport { MakerRoleRegistryContract } from '../types/truffle-contracts/MakerRoleRegistry';\nimport { ManufacturerRoleRegistryContract } from '../types/truffle-contracts/ManufacturerRoleRegistry';\nimport { NotaryRoleRegistryContract } from '../types/truffle-contracts/NotaryRoleRegistry';\nimport { PharmacyRoleRegistryContract } from '../types/truffle-contracts/PharmacyRoleRegistry';\nimport { RegulatorRoleRegistryContract } from '../types/truffle-contracts/RegulatorRoleRegistry';\nimport { RequesterRoleRegistryContract } from '../types/truffle-contracts/RequesterRoleRegistry';\nimport { ResellerRoleRegistryContract } from '../types/truffle-contracts/ResellerRoleRegistry';\nimport { RevisorRoleRegistryContract } from '../types/truffle-contracts/RevisorRoleRegistry';\nimport { SSCRoleRegistryContract } from '../types/truffle-contracts/SSCRoleRegistry';\nimport { SupplierRoleRegistryContract } from '../types/truffle-contracts/SupplierRoleRegistry';\nimport { ApproverRoleRegistryContract } from '../types/truffle-contracts/ApproverRoleRegistry';\nimport { TransporterRoleRegistryContract } from '../types/truffle-contracts/TransporterRoleRegistry';\nimport { WarehouseRoleRegistryContract } from '../types/truffle-contracts/WarehouseRoleRegistry';\nimport { BankRoleRegistryContract } from '../types/truffle-contracts/BankRoleRegistry';\nimport { ApplicantRoleRegistryContract } from '../types/truffle-contracts/ApplicantRoleRegistry';\nimport { BeneficiaryRoleRegistryContract } from '../types/truffle-contracts/BeneficiaryRoleRegistry';\nimport { L1ApproverRoleRegistryContract } from '../types/truffle-contracts/L1ApproverRoleRegistry';\nimport { L2ApproverRoleRegistryContract } from '../types/truffle-contracts/L2ApproverRoleRegistry';\nimport { L3ApproverRoleRegistryContract } from '../types/truffle-contracts/L3ApproverRoleRegistry';\n\nimport { UserRoleRegistryContract } from '../types/truffle-contracts/UserRoleRegistry';\n\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst { enabledFeatures } = require('../../truffle-config.js'); // two dirs up, because it is compiled into ./dist/migrations\n\nconst GateKeeper: GateKeeperContract = artifacts.require('GateKeeper');\n\nconst AdminRoleRegistry: AdminRoleRegistryContract = artifacts.require('AdminRoleRegistry');\nconst MakerRoleRegistry: MakerRoleRegistryContract = artifacts.require('MakerRoleRegistry');\nconst CheckerRoleRegistry: CheckerRoleRegistryContract = artifacts.require('CheckerRoleRegistry');\nconst ManufacturerRoleRegistry: ManufacturerRoleRegistryContract = artifacts.require('ManufacturerRoleRegistry');\nconst ResellerRoleRegistry: ResellerRoleRegistryContract = artifacts.require('ResellerRoleRegistry');\nconst UserRoleRegistry: UserRoleRegistryContract = artifacts.require('UserRoleRegistry');\nconst RevisorRoleRegistry: RevisorRoleRegistryContract = artifacts.require('RevisorRoleRegistry');\nconst PharmacyRoleRegistry: PharmacyRoleRegistryContract = artifacts.require('PharmacyRoleRegistry');\nconst AgentRoleRegistry: AgentRoleRegistryContract = artifacts.require('AgentRoleRegistry');\nconst RegulatorRoleRegistry: RegulatorRoleRegistryContract = artifacts.require('RegulatorRoleRegistry');\nconst LandRegistrarRoleRegistry: LandRegistrarRoleRegistryContract = artifacts.require('LandRegistrarRoleRegistry');\nconst CaptainRoleRegistry: CaptainRoleRegistryContract = artifacts.require('CaptainRoleRegistry');\nconst CarrierRoleRegistry: CarrierRoleRegistryContract = artifacts.require('CarrierRoleRegistry');\nconst BusinessUnitRoleRegistry: BusinessUnitRoleRegistryContract = artifacts.require('BusinessUnitRoleRegistry');\nconst SupplierRoleRegistry: SupplierRoleRegistryContract = artifacts.require('SupplierRoleRegistry');\nconst SSCRoleRegistry: SSCRoleRegistryContract = artifacts.require('SSCRoleRegistry');\nconst NotaryRoleRegistry: NotaryRoleRegistryContract = artifacts.require('NotaryRoleRegistry');\nconst BuyerRoleRegistry: BuyerRoleRegistryContract = artifacts.require('BuyerRoleRegistry');\nconst RequesterRoleRegistry: RequesterRoleRegistryContract = artifacts.require('RequesterRoleRegistry');\nconst ApproverRoleRegistry: ApproverRoleRegistryContract = artifacts.require('ApproverRoleRegistry');\nconst TransporterRoleRegistry: TransporterRoleRegistryContract = artifacts.require('TransporterRoleRegistry');\nconst WarehouseRoleRegistry: WarehouseRoleRegistryContract = artifacts.require('WarehouseRoleRegistry');\nconst BankRoleRegistry: BankRoleRegistryContract = artifacts.require('BankRoleRegistry');\nconst ApplicantRoleRegistry: ApplicantRoleRegistryContract = artifacts.require('ApplicantRoleRegistry');\nconst BeneficiaryRoleRegistry: BeneficiaryRoleRegistryContract = artifacts.require('BeneficiaryRoleRegistry');\nconst L1ApproverRoleRegistry: L1ApproverRoleRegistryContract = artifacts.require('L1ApproverRoleRegistry');\nconst L2ApproverRoleRegistry: L2ApproverRoleRegistryContract = artifacts.require('L2ApproverRoleRegistry');\nconst L3ApproverRoleRegistry: L3ApproverRoleRegistryContract = artifacts.require('L3ApproverRoleRegistry');\n\nconst FreightForwarderRoleRegistry: FreightForwarderRoleRegistryContract = artifacts.require(\n  'FreightForwarderRoleRegistry'\n);\n\nconst roleRegistries: Array<{\n  registry: Truffle.Contract<any>;\n  role: string;\n  prefix: string;\n  seed: string;\n}> = [];\n\nconst found = (features: string[]) => enabledFeatures().some((feature: string) => features.includes(feature));\n\nif (\n  found([\n    'LOANS',\n    'SHARES',\n    'CURRENCY',\n    'LOYALTYPOINT',\n    'IDENTITIES',\n    'BONDS',\n    'VEHICLE',\n    'EXPENSE',\n    'STATEFULBONDS',\n    'STATEFULOMNIBUSBONDS',\n    'BILLOFLADING',\n    'KYC',\n  ])\n) {\n  roleRegistries.push({\n    registry: UserRoleRegistry,\n    role: 'ROLE_USER',\n    prefix: 'user',\n    seed: 'valve yard cement detect festival tragic annual dinner enforce gate sun near',\n  });\n}\n\nif (found(['STATEFULBONDS', 'STATEFULOMNIBUSBONDS'])) {\n  roleRegistries.push(\n    {\n      registry: MakerRoleRegistry,\n      role: 'ROLE_MAKER',\n      prefix: 'maker',\n      seed: 'stove water train uniform minute juice mirror kitten human garage chunk tomato',\n    },\n    {\n      registry: CheckerRoleRegistry,\n      role: 'ROLE_CHECKER',\n      prefix: 'checker',\n      seed: 'smile tomato cabin giraffe swallow school weapon expose tissue kitten they ribbon',\n    }\n  );\n}\n\nif (found(['BILLOFLADING'])) {\n  roleRegistries.push(\n    {\n      registry: CaptainRoleRegistry,\n      role: 'ROLE_CAPTAIN',\n      prefix: 'captain',\n      seed: 'spring profit rebuild kit river stove august tilt arrow crater rural tool',\n    },\n    {\n      registry: CarrierRoleRegistry,\n      role: 'ROLE_CARRIER',\n      prefix: 'carrier',\n      seed: 'force sniff virus side pilot eyebrow fragile auto scene party degree expire',\n    },\n    {\n      registry: FreightForwarderRoleRegistry,\n      role: 'ROLE_FREIGHT_FORWARDER',\n      prefix: 'freightforwarder',\n      seed: 'present sunset corn tower banner jump snow scrub style prize casual ball',\n    }\n  );\n}\n\nif (found(['DRUGPACKAGE', 'VEHICLE'])) {\n  roleRegistries.push({\n    registry: ManufacturerRoleRegistry,\n    role: 'ROLE_MANUFACTURER',\n    prefix: 'manufacturer',\n    seed: 'infant transfer spatial warfare chief mandate ahead execute grit vessel domain clay',\n  });\n}\n\nif (found(['DRUGPACKAGE'])) {\n  roleRegistries.push(\n    {\n      registry: ResellerRoleRegistry,\n      role: 'ROLE_RESELLER',\n      prefix: 'reseller',\n      seed: 'elder pass group bacon equal adapt fish birth search goose garage slush',\n    },\n    {\n      registry: PharmacyRoleRegistry,\n      role: 'ROLE_PHARMACY',\n      prefix: 'pharmacy',\n      seed: 'buzz truth attend treat spring sort unaware easily fiber half load wait',\n    }\n  );\n}\n\nif (found(['EXPENSES'])) {\n  roleRegistries.push({\n    registry: RevisorRoleRegistry,\n    role: 'ROLE_REVISOR',\n    prefix: 'revisor',\n    seed: 'vibrant breeze axis dove diagram rescue surge ceiling day stool heart oak',\n  });\n}\n\nif (found(['PLOTS'])) {\n  roleRegistries.push(\n    {\n      registry: LandRegistrarRoleRegistry,\n      role: 'ROLE_LAND_REGISTRAR',\n      prefix: 'land_registrar',\n      seed: 'adapt survey million real search bargain excuse magic lab convince drum control',\n    },\n    {\n      registry: NotaryRoleRegistry,\n      role: 'ROLE_NOTARY',\n      prefix: 'notary',\n      seed: 'bubble viable artefact lake copper sell tribe scale estate equal cube limb',\n    }\n  );\n}\n\nif (found(['ORDERS'])) {\n  roleRegistries.push(\n    {\n      registry: BusinessUnitRoleRegistry,\n      role: 'ROLE_BU',\n      prefix: 'bu',\n      seed: 'say radar original jungle camera position nominee assault pledge sure anger sample',\n    },\n    {\n      registry: SupplierRoleRegistry,\n      role: 'ROLE_SUPPLIER',\n      prefix: 'supplier',\n      seed: 'infant transfer spatial warfare chief mandate ahead execute grit vessel domain clay',\n    },\n    {\n      registry: SSCRoleRegistry,\n      role: 'ROLE_SSC',\n      prefix: 'ssc',\n      seed: 'elder pass group bacon equal adapt fish birth search goose garage slush',\n    }\n  );\n}\n\nif (found(['VEHICLE'])) {\n  roleRegistries.push(\n    {\n      registry: AgentRoleRegistry,\n      role: 'ROLE_AGENT',\n      prefix: 'agent',\n      seed: 'best parrot quantum thank initial toward remind broken recycle scrap deputy battle',\n    },\n    {\n      registry: RegulatorRoleRegistry,\n      role: 'ROLE_REGULATOR',\n      prefix: 'regulator',\n      seed: 'evil raven habit style film brand change winter upon toilet dignity burger',\n    }\n  );\n}\n\nif (found(['SUPPLYCHAIN', 'SUPPLYFINANCE'])) {\n  roleRegistries.push(\n    {\n      registry: BuyerRoleRegistry,\n      role: 'ROLE_BUYER',\n      prefix: 'buyer',\n      seed: 'neutral oppose tail phone elegant eye jar catch awake indoor poet exile',\n    },\n\n    {\n      registry: SupplierRoleRegistry,\n      role: 'ROLE_SUPPLIER',\n      prefix: 'supplier',\n      seed: 'minor hybrid vault recall cruel appear claw fury matter shift swallow glide',\n    },\n\n    {\n      registry: TransporterRoleRegistry,\n      role: 'ROLE_TRANSPORTER',\n      prefix: 'transporter',\n      seed: 'destroy popular link merge unusual cram cousin joke struggle evil gauge marriage',\n    },\n\n    {\n      registry: WarehouseRoleRegistry,\n      role: 'ROLE_WAREHOUSE',\n      prefix: 'warehouse',\n      seed: 'noodle earth hand wood regret section multiply spawn injury cup push sing',\n    },\n\n    {\n      registry: RegulatorRoleRegistry,\n      role: 'ROLE_REGULATOR',\n      prefix: 'regulator',\n      seed: 'tackle vehicle garage wage space actor only skin reunion veteran legal ahead',\n    },\n\n    {\n      registry: BankRoleRegistry,\n      role: 'ROLE_BANK',\n      prefix: 'bank',\n      seed: 'kitten elite dwarf mystery crane tragic ramp review mushroom actual maze priority',\n    }\n  );\n}\n\nif (found(['KYB', 'KYC'])) {\n  roleRegistries.push(\n    {\n      registry: RequesterRoleRegistry,\n      role: 'ROLE_REQUESTER',\n      prefix: 'requester',\n      seed: 'wrap bulb fold snap ready win announce swarm hidden enter innocent window',\n    },\n\n    {\n      registry: ApproverRoleRegistry,\n      role: 'ROLE_APPROVER',\n      prefix: 'approver',\n      seed: 'wise output protect whale dial trap frame gauge globe hazard pride pretty',\n    }\n  );\n}\n\nif (found(['BG'])) {\n  roleRegistries.push(\n    {\n      registry: BeneficiaryRoleRegistry,\n      role: 'ROLE_BENEFICIARY',\n      prefix: 'beneficiary',\n      seed: 'wrap bulb fold snap ready win announce swarm hidden enter innocent window',\n    },\n\n    {\n      registry: ApplicantRoleRegistry,\n      role: 'ROLE_APPLICANT',\n      prefix: 'applicant',\n      seed: 'wise output protect whale dial trap frame gauge globe hazard pride pretty',\n    },\n\n    {\n      registry: BankRoleRegistry,\n      role: 'ROLE_BANK',\n      prefix: 'bank',\n      seed: 'wrap bulb fold snap ready win announce swarm hidden enter innocent window',\n    }\n  );\n}\n\nif (found(['TRADE'])) {\n  roleRegistries.push(\n    {\n      registry: MakerRoleRegistry,\n      role: 'ROLE_MAKER',\n      prefix: 'Maker',\n      seed: 'stove water train uniform minute juice mirror kitten human garage chunk tomato',\n    },\n    {\n      registry: L1ApproverRoleRegistry,\n      role: 'ROLE_L1Approver',\n      prefix: 'L1Approver',\n      seed: 'smile tomato cabin giraffe swallow school weapon expose tissue kitten they ribbon',\n    }, \n\n    {\n        registry: L2ApproverRoleRegistry,\n        role: 'ROLE_L2APPROVER',\n        prefix: 'L2approver',\n        seed: 'valve yard cement detect festival tragic annual dinner enforce gate sun near',\n      },\n  \n      {\n        registry: L3ApproverRoleRegistry,\n        role: 'ROLE_L3APPROVER',\n        prefix: 'L3approver',\n        seed: 'spring profit rebuild kit river stove august tilt arrow crater rural tool',\n      },\n      {\n        registry: RequesterRoleRegistry,\n        role: 'ROLE_REQUESTER',\n        prefix: 'Requester',\n        seed: 'say radar original jungle camera position nominee assault pledge sure anger sample',\n      },\n      {\n        registry: BankRoleRegistry,\n        role: 'ROLE_BANK',\n        prefix: 'bank',\n        seed: 'infant transfer spatial warfare chief mandate ahead execute grit vessel domain clay',\n      },\n\n  );\n}\n\n\nmodule.exports = async (deployer: Truffle.Deployer, network: string, accounts: string[]) => {\n  const userData: IMintUser[] = [];\n  let bipIndex = 0;\n\n  const dGateKeeper: GateKeeperInstance = await GateKeeper.deployed();\n\n  // Admin\n  const dAdminRoleRegistry: AdminRoleRegistryInstance = await deployRoleRegistry(\n    AdminRoleRegistry,\n    dGateKeeper,\n    accounts[0],\n    deployer\n  );\n\n  const hasRole = await dAdminRoleRegistry.hasRole(accounts[0]);\n  if (!hasRole) {\n    await dAdminRoleRegistry.designate(accounts[0]);\n  }\n\n  // admin key\n  const adminKeyAsBytes32 = web3.utils.fromAscii('ROLE_ADMIN');\n  const adminZeroPaddedKey = web3.eth.abi.encodeParameter('bytes32', adminKeyAsBytes32);\n\n  // add roleregistry to gatekeeper and roleregistrymap\n  await dGateKeeper.addRoleRegistry(dAdminRoleRegistry.address);\n  await dGateKeeper.setRoleRegistryAddress(adminZeroPaddedKey, dAdminRoleRegistry.address);\n\n  // Give to role registry the permission to designate admin roles to others\n  await grantPermission(dGateKeeper, dAdminRoleRegistry, 'DESIGNATE_ROLE', dAdminRoleRegistry.address);\n\n  for (const roleRegistry of roleRegistries) {\n    const dRoleRegistry = await deployRoleRegistry(\n      roleRegistry.registry,\n      dGateKeeper,\n      accounts[0], // only admin can do this\n      deployer\n    );\n\n    const amount = 2;\n    for (let i = 0; i < amount; i++) {\n      userData.push({\n        mnemonic: roleRegistry.seed,\n        bip39Path: `m/44'/60'/0'/0/${bipIndex++}`,\n        username: `${roleRegistry.prefix}${i}@example.com`,\n        firstname: faker.name.firstName(),\n        lastname: `(${roleRegistry.role.replace('ROLE_', '').replace('_ROLE', '')})`,\n        company: faker.company.companyName(),\n        password: 'settlemint',\n        role: 'USER',\n        roleRegistry: dRoleRegistry,\n      });\n    }\n\n    // create keys again\n    const keyAsBytes32 = web3.utils.fromAscii(roleRegistry.role);\n    const zeroPaddedKey = web3.eth.abi.encodeParameter('bytes32', keyAsBytes32);\n\n    // Add roleregistry to gatekeeper and roleregistrymap\n    await dGateKeeper.addRoleRegistry(dRoleRegistry.address);\n    await dGateKeeper.setRoleRegistryAddress(zeroPaddedKey, dRoleRegistry.address);\n\n    // Give to role registry the permission to designate role registry roles to others\n    await grantPermission(dGateKeeper, dRoleRegistry, 'DESIGNATE_ROLE', dRoleRegistry.address);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-var-requires\n  const { entethMiddleware } = require('../../truffle-config.js'); // two dirs up, because it is compiled into ./dist/migrations\n  await createMintAccounts({\n    userData,\n    mintHost: entethMiddleware,\n  });\n};\n"]}