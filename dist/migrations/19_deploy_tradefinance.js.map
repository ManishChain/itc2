{"version":3,"file":"19_deploy_tradefinance.js","sourceRoot":"","sources":["../../migrations/19_deploy_tradefinance.ts"],"names":[],"mappings":";;AAAA,+EAAiG;AAUjG,MAAM,UAAU,GAAuB,SAAS,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;AACvE,MAAM,oBAAoB,GAAiC,SAAS,CAAC,OAAO,CAAC,sBAAsB,CAAC,CAAC;AACrG,MAAM,mBAAmB,GAAgC,SAAS,CAAC,OAAO,CAAC,qBAAqB,CAAC,CAAC;AAClG,MAAM,iBAAiB,GAA8B,SAAS,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;AAC5F,MAAM,iBAAiB,GAA8B,SAAS,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;AAE5F,8DAA8D;AAC9D,MAAM,EAAE,eAAe,EAAE,aAAa,EAAE,GAAG,OAAO,CAAC,yBAAyB,CAAC,CAAC,CAAC,6DAA6D;AAE5I,MAAM,CAAC,OAAO,GAAG,KAAK,EAAE,QAA0B,EAAE,OAAe,EAAE,QAAkB,EAAE,EAAE;IACzF,IAAI,eAAe,EAAE,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE;QACvC,8DAA8D;QAC9D,MAAM,aAAa,GAAG,OAAO,CAAC,0CAA0C,CAAC,CAAC;QAE1E,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,iDAAwB,CAChD,QAAQ,EACR,QAAQ,EACR,UAAU,EACV,oBAAoB,EACpB,mBAAmB,EACnB,CAAC,iBAAiB,EAAE,iBAAiB,CAAC,EACtC,aAAa,EACb,aAAa,CACd,CAAC;QAEF,MAAM,aAAa,GAAG;YACpB;gBACE,UAAU,EAAE,mBAAmB;gBAE/B,IAAI,EAAE,KAAK;gBACX,IAAI,EAAE,YAAY;gBAClB,KAAK,EAAE,OAAO;gBACd,WAAW,EAAE,wBAAwB;aACtC;YACD;gBACE,UAAU,EAAE,mBAAmB;gBAE/B,IAAI,EAAE,OAAO;gBACb,IAAI,EAAE,YAAY;gBAClB,KAAK,EAAE,OAAO;gBACd,WAAW,EAAE,uBAAuB;aACrC;SACF,CAAC;QAEF,KAAK,MAAM,YAAY,IAAI,aAAa,EAAE;YACxC,MAAM,kBAAkB,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;SACjD;KACF;AACH,CAAC,CAAC;AAEF,KAAK,UAAU,kBAAkB,CAC/B,OAAoC,EACpC,YAMC;IAED,MAAM,QAAQ,GAAG,MAAM,0CAAiB,CAAC,EAExC,CAAC,CAAC;IACH,MAAM,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,UAAU,EAAE,YAAY,CAAC,IAAI,EAAG,YAAY,CAAC,IAAI,EAAE,YAAY,CAAC,KAAK,EAAG,YAAY,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC;AAChJ,CAAC","sourcesContent":["import { deployStateMachineSystem, storeIpfsJsonData } from '@settlemint/enteth-migration-utils';\nimport { AdminRoleRegistryContract } from '../types/truffle-contracts/AdminRoleRegistry';\nimport { MakerRoleRegistryContract } from '../types/truffle-contracts/MakerRoleRegistry';\nimport { GateKeeperContract } from '../types/truffle-contracts/GateKeeper';\nimport {\n  TradeFinanceFactoryContract,\n  TradeFinanceFactoryInstance,\n} from '../types/truffle-contracts/TradeFinanceFactory';\nimport { TradeFinanceRegistryContract } from '../types/truffle-contracts/TradeFinanceRegistry';\n\nconst GateKeeper: GateKeeperContract = artifacts.require('GateKeeper');\nconst TradeFinanceRegistry: TradeFinanceRegistryContract = artifacts.require('TradeFinanceRegistry');\nconst TradeFinanceFactory: TradeFinanceFactoryContract = artifacts.require('TradeFinanceFactory');\nconst AdminRoleRegistry: AdminRoleRegistryContract = artifacts.require('AdminRoleRegistry');\nconst BuyerRoleRegistry: MakerRoleRegistryContract = artifacts.require('MakerRoleRegistry');\n\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst { enabledFeatures, storeIpfsHash } = require('../../truffle-config.js'); // two dirs up, because it is compiled into ./dist/migrations\n\nmodule.exports = async (deployer: Truffle.Deployer, network: string, accounts: string[]) => {\n  if (enabledFeatures().includes('TRADE')) {\n    // eslint-disable-next-line @typescript-eslint/no-var-requires\n    const uiDefinitions = require('../../contracts/trade/UIDefinitions.json');\n\n    const { factory } = await deployStateMachineSystem(\n      deployer,\n      accounts,\n      GateKeeper,\n      TradeFinanceRegistry,\n      TradeFinanceFactory,\n      [AdminRoleRegistry, BuyerRoleRegistry],\n      uiDefinitions,\n      storeIpfsHash\n    );\n\n    const TradeFinances = [\n      {\n        SAP_Number: '5YJXCAE45GFF00001',\n\n        Bank: 'SBI',\n        Date: '1558362520',\n        Value: '55000',\n        Beneficiary: 'Street 4, City Central',\n      },\n      {\n        SAP_Number: '5YJRE1A31A1P01234',\n\n        Bank: 'ICICI',\n        Date: '1558362520',\n        Value: '55000',\n        Beneficiary: 'Street 5, City Square',\n      },\n    ];\n\n    for (const TradeFinance of TradeFinances) {\n      await createTradeFinance(factory, TradeFinance);\n    }\n  }\n};\n\nasync function createTradeFinance(\n  factory: TradeFinanceFactoryInstance,\n  TradeFinance: {\n    SAP_Number: string;\n    Bank: string;\n    Date: string;\n    Value: string;\n    Beneficiary: string;\n  }\n) {\n  const ipfsHash = await storeIpfsJsonData({\n  \n  });\n  await factory.create(TradeFinance.SAP_Number, TradeFinance.Bank,  TradeFinance.Date, TradeFinance.Value,  TradeFinance.Beneficiary, ipfsHash);\n}\n"]}